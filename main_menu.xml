<?xml version="1.0" encoding="UTF-8"?>
<vxml version="2.1">

<!--
    Main menu.
-->
<menu id="main" dtmf="true">
    <prompt>Welcome to Afri Cereal. Your application to exchange, sell, or buy seeds. You can write or receive messages, join groups, or receive seed specific information. What would you like to do? <enumerate/>
    </prompt>
    <choice next="BSE/exchanging_seeds.xml"> Exchange seeds </choice>
    <choice next="BSE/selling_seeds.xml"> Sell seeds </choice>
    <choice next="BSE/buying_seeds.xml"> Buy seeds </choice>
    <choice next="#menuMessages"> View Messages </choice>
    <choice next="#menuMessages"> Send Message </choice>
    <choice next="#menuGroups"> Groups </choice>
    <choice next="Inventory/inventory_menu.xml">Seed information</choice>
    <noinput>Sorry, I didn't catch that.<reprompt/></noinput>
    <nomatch>Sorry, that does not match any of the options.<reprompt/></nomatch>
</menu>

<!--
    Menu for Exchange, sell/buy seeds.
-->
<menu id="menuEsbSeeds" dtmf="true">
    <choice next="#menuMessages">temp choice</choice>
</menu>

<!--
    Menu for messages.
-->
<menu id="menuMessages" dtmf="true">
    <prompt>Where would you like to go? <enumerate/></prompt>
    <choice next="#receivedMessages">Received messages</choice>
    <choice next="#leaveMessages">Leave messages</choice>
    <choice next="#main">Go back</choice>
    <nomatch>Please say one of <enumerate/>
    </nomatch>
</menu>

<!--
    Menu for groups.
-->
<menu id="menuGroups" dtmf="true">
    <choice next="#menuMessages">temp choice</choice>
</menu>

<!--Forms-->
<!--
    Forms for messages
-->
<form id="receivedMessages">
    <field name="confirm" type="boolean">
        <prompt>
                You received 1 message from Mark, yesterday at 10:00 AM. Would you like to hear the message?
                To hear it, say yes. To not hear it, say no.
        </prompt>
        <filled>
            <if cond="confirm">
                <prompt>
                    <audio src="trading.wav"/>
                </prompt>
                <goto next="#menuMessages"/>
            </if>
            <if cond="!confirm">
                <goto next="#menuMessages"/>
            </if>
        </filled>
    </field>
</form>

<form id="leaveMessages">
    <field name="confirm" type="boolean">
        <prompt>
                Would you like to send a message to Mark?
        </prompt>
        <prompt>
                To leave a message, say yes. Otherwise say no.
        </prompt>
        <filled>
            <if cond="confirm">
                <goto next="#recordMessage"/>
            </if>
            <if cond="!confirm">
                <goto next="#menuMessages"/>
            </if>
        </filled>
    </field>
</form>

<form id="recordMessage">
    <record name="msg" beep="true" maxtime="30s" finalsilence="4000ms" dtmfterm="true" type="audio/x-wav">
        <prompt timeout="5s">
                Record a message after the beep.
        </prompt>
        <noinput>
                I didn't hear anything, please try again.
        </noinput>
    </record>
    <field name="confirmMessage" type="boolean">
        <prompt>
                Your message is <audio expr="msg"/>
        </prompt>
        <prompt>
                To send say yes, to discard it say no.
        </prompt>
        <filled>
            <if cond="confirmMessage">
                <prompt>
                        Message send.
                </prompt>
            </if>
            <goto next="#menuMessages" />
        </filled>
    </field>
</form>
</vxml>