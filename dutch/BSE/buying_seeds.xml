<vxml version="2.0">

<form id="select_seed_type">
    <field name="seed_type_input">
        <prompt bargein="true">You have selected that you are interested in buying seeds. 
        Before recording and submitting your request, we first need to some information. 
        We currently have three types of seeds available: Sorgho, Millet, and Petit mil.
        Please select which type of seed you want to buy.</prompt>
        <option value="Sorgho">Sorgho</option>
        <option value="Millet">Millet</option>
        <option value="Petit mil">Petit mil</option>
    </field>
    <filled>
        <assign name="selected_seed_type" expr="seed_type_input"/>   
        <goto next="#check_seed_input"/>
    </filled>
</form>

<form id="check_seed_input">
    <field name="check_selected_seed_type">
        <prompt>You have selected <value expr="selected_seed_type"/>. Do you want to proceed?</prompt>
        <option value="yes">Yes</option>
        <option value="no">No</option>
        <noinput>Sorry, I didn't catch that.<reprompt/></noinput>
        <nomatch>Sorry, that does not match any of the options.<reprompt/></nomatch>
    </field>
    <filled>
        <if cond="check_selected_seed_type == 'yes'">
        <prompt>You have selected that you want to buy <value expr="selected_seed_type"/>.</prompt>
        <goto next="#recordMessage"/>
        <elseif cond="check_selected_seed_type == 'no'"/>
        <goto next="#select_seed_type"/>
        <else>
        <prompt>Invalid response. Please try again.</prompt>
        </else>
        </if>
    </filled>
</form>

<form id="select_amount">
    <field name="amount_input" type="number">
        <prompt>How much kilograms of <value expr="selected_seed_type"/> do you want to buy?</prompt>
        <noinput>Sorry, I didn't catch that.<reprompt/></noinput>
        <nomatch>Sorry, that does not match any of the options.<reprompt/></nomatch>
        <filled>
        <assign name="selected_seed_amount" expr="amount_input"/>   
        <goto next="#check_amount"/>
        </filled>
    </field>
</form>

<form id="check_amount">
    <field name="check_selected_amount">
        <prompt>You have selected <value expr="selected_seed_amount"/> kilograms of <value expr="selected_seed_type"/>. Do you want to proceed?</prompt>
        <option value="yes">Yes</option>
        <option value="no">No</option>
        <noinput>Sorry, I didn't catch that.<reprompt/></noinput>
        <nomatch>Sorry, that does not match any of the options.<reprompt/></nomatch>
    </field>
    <filled>
        <if cond="check_selected_amount == 'yes'">
        <prompt>Great, thank you for providing the necessary information. Please leave a message after the tone containing your Name, the Seed type you are interested in, the seed quantity you are interested in, your location, and telephone number. </prompt> 
        <goto next="#recordMessage"/>
        <elseif cond="check_selected_amount == 'no'"/>
        <goto next="#select_amount"/>
        <else>
        <prompt>Invalid response. Please try again.</prompt>
        </else>
        </if>
    </filled>
</form>


<form id="re_record">
    <prompt>You have chosen to discard your message. Please record a new message</prompt>
</form>

<form id="recordMessage">
    <record name="msg" beep="true" maxtime="30s" finalsilence="4000ms" dtmfterm="true" type="audio/x-wav">
        <prompt timeout="5s">Record a message after the beep.</prompt>
        <noinput>I didn't hear anything, please try again.</noinput>
        </record>
    <field name="confirmMessage">
        <prompt>Your message is <audio expr="msg"/></prompt>
        <prompt>To submit your request say yes, to discard it say no.</prompt>
        <option value="yes">Yes</option>
        <option value="no">No</option>
        <noinput>Sorry, I didn't catch that.<reprompt/></noinput>
        <nomatch>Sorry, that does not match any of the options.<reprompt/></nomatch>
    </field>
    <filled>
        <if cond="confirmMessage == 'yes'">
            <prompt>Your request was submitted.</prompt>
            <goto next="../dutch_main_menu.xml" />
        <elseif cond="confirmMessage == 'no'"/>
            <prompt>Your message has been discarded.</prompt>
            <goto next="#recordMessage"/>
        <else>
            <prompt>Invalid response. Please try again.</prompt>
        </else>
        </if>
    </filled>

</form>
</vxml>